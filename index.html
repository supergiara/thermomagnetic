<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Thermomagnetic Calculator</title>
<style>
    body {
        font-family: Arial, sans-serif;
        padding: 40px;
        max-width: 900px;
        margin: auto;
    }
    h1 {
        text-align: center;
        margin-bottom: 20px;
    }
    img {
        display: block;
        margin: 0 auto 30px auto;
        width: 200px;
    }
    label {
        font-weight: bold;
    }
    input, select {
        width: 100%;
        padding: 10px;
        margin: 8px 0 20px 0;
        font-size: 16px;
    }
    button {
        width: 100%;
        padding: 15px;
        background-color: #333;
        color: white;
        font-size: 18px;
        border: none;
        cursor: pointer;
        margin-top: 10px;
    }
    button:hover {
        background-color: #555;
    }
    .output {
        margin-top: 30px;
        padding: 20px;
        border: 1px solid #ddd;
    }
    .output h2 {
        margin-top: 0;
    }
</style>
</head>
<body>

<img src="logo.png" alt="Logo">

<h1>Thermomagnetic Calculator</h1>

<label>Motor Power (kW)</label>
<input type="number" id="power" step="0.1">

<label>Voltage (V)</label>
<input type="number" id="voltage">

<label>Phases</label>
<select id="phases">
    <option value="1">1</option>
    <option value="3">3</option>
</select>

<label>Start Mode</label>
<select id="start">
    <option value="DOL">DOL</option>
    <option value="STAR-DELTA">Star-Delta</option>
</select>

<button onclick="calculate()">Calculate</button>

<div class="output" id="result"></div>

<script>
function calculate() {

    const power = parseFloat(document.getElementById("power").value);
    const voltage = parseFloat(document.getElementById("voltage").value);
    const phases = parseInt(document.getElementById("phases").value);
    const start = document.getElementById("start").value;

    if (isNaN(power) || isNaN(voltage)) {
        alert("Please enter valid numeric values.");
        return;
    }

    // --- AVG CURRENT (Excel formula replicated) ----
    const eff = (power < 5 ? 0.8 : 0.85);
    const divisorPh = (phases === 3 ? Math.sqrt(3) : 1);

    let avg = (power / (voltage * eff)) * 1000 / divisorPh / 0.9;
    avg = Number(avg.toFixed(1));

    // --- PEAK CURRENT ---
    let peak;
    if (start === "DOL") peak = avg * 7;
    else peak = avg * 7 / 3;
    peak = Number(peak.toFixed(1));

    // --- BREAKER NOMINAL LIST ---
    const breakers = [6, 10, 16, 20, 25, 32, 40, 50];

    // -------- CURVE C --------
    let curveC = "Not found";
    for (let i = 0; i < breakers.length; i++) {
        const Cval = breakers[i] * 5;   // C column
        const diff = Cval - avg;
        if (diff >= 0) {
            curveC = "C" + breakers[i];
            break;
        }
    }

    // -------- CURVE D --------
    let curveD = "Not found";
    for (let i = 0; i < breakers.length; i++) {
        const Dval = breakers[i] * 10;   // D column
        const diff = Dval - avg;
        if (diff >= 0) {
            curveD = "D" + breakers[i];
            break;
        }
    }

    document.getElementById("result").innerHTML = `
        <h2>Results</h2>
        <p><strong>Average Current:</strong> ${avg} A</p>
        <p><strong>Peak Current:</strong> ${peak} A</p>
        <p><strong>Thermomagnetic Curve C:</strong> ${curveC}</p>
        <p><strong>Thermomagnetic Curve D:</strong> ${curveD}</p>
    `;
}
</script>

</body>
</html>
